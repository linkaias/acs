import{b as n,e as _,f as b,w as t,h as e,_ as U,a as N,m as j,r as g,o as A,d as G,c as P,i as L,F as O,g as x,u as B,v as J,x as p,k as K,l as Q,y as R,E as y,q as W,s as X}from"./index-07fbba9f.js";import{r as Z,a as ee,b as te,c as ae}from"./index-89cf8bcc.js";import{l as le}from"./lodash-fa97179f.js";import"./request-675639ab.js";const oe={__name:"form",props:{FormData:{type:Object,default:()=>({})}},setup(f){const r=f;return(v,i)=>{const h=n("el-input"),c=n("el-form-item"),m=n("el-form");return _(),b(m,{model:r.FormData,size:"large"},{default:t(()=>[e(c,{label:"分组名称"},{default:t(()=>[e(h,{modelValue:r.FormData.name,"onUpdate:modelValue":i[0]||(i[0]=d=>r.FormData.name=d),placeholder:"请输入分组名称"},null,8,["modelValue"])]),_:1}),e(c,{label:"分组描述"},{default:t(()=>[e(h,{modelValue:r.FormData.desc,"onUpdate:modelValue":i[1]||(i[1]=d=>r.FormData.desc=d),type:"textarea",placeholder:"请输入分组描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])}}};const ne=f=>(W("data-v-c2f8cf8b"),f=f(),X(),f),se=ne(()=>x("div",{class:"card-header"},[x("span",null,"请求分组列表")],-1)),ce={class:"my_table_header"},de={class:"dialog-footer"},re={__name:"index",setup(f){const r=N(j()),v=g(!1),i=g([]),h=[{path:"/",name:"首页"},{path:"",name:"请求分组管理"}],c=g(!1),m=g({id:0,name:"",desc:""});A(()=>{r.SetTitle("请求分组管理"),r.SetBreadcrumb(h),d()});const d=async()=>{v.value=!0;let a=await Z();v.value=!1;let l=a.data;for(let o=0;o<l.length;o++)l[o].created_at=G(l[o].created_at).format("YYYY-MM-DD HH:mm:ss"),l[o].updated_at=G(l[o].updated_at).format("YYYY-MM-DD HH:mm:ss");i.value=l},D=a=>{m.value={id:a.id,name:a.name,desc:a.desc},c.value=!0},C=a=>{R.confirm("确定删除["+a.name+"]分组吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{q(a.id)}).catch(()=>{})},Y=()=>{c.value=!1},M=()=>{m.value={id:0,name:"",desc:""}},S=()=>{$()},z=()=>{c.value=!0},$=async()=>{let a=le.cloneDeep(m.value);if(a.name===""){y.error("分组名称不能为空");return}if(a.id>0){let l=await ee(a);await d(),y.success(l.msg)}else{let l=await te(a);await d(),y.success(l.msg)}c.value=!1},q=async a=>{let l=await ae(a);await d(),y.success(l.msg)};return(a,l)=>{const o=n("el-button"),F=n("el-form-item"),V=n("el-form"),u=n("el-table-column"),w=n("el-tooltip"),E=n("el-table"),I=n("el-card"),T=n("el-dialog"),H=P("loading");return _(),L(O,null,[e(I,{shadow:"never"},{header:t(()=>[se]),default:t(()=>[x("div",ce,[e(V,{inline:""},{default:t(()=>[e(F,null,{default:t(()=>[e(o,{icon:B(J),plain:"",onClick:z},{default:t(()=>[p("新增分组")]),_:1},8,["icon"])]),_:1})]),_:1}),e(V,{inline:""},{default:t(()=>[e(F,null,{default:t(()=>[e(o,{icon:B(K),circle:"",onClick:d},null,8,["icon"])]),_:1})]),_:1})]),Q((_(),b(E,{size:"large",border:"",data:i.value,style:{width:"100%","margin-bottom":"50px"}},{default:t(()=>[e(u,{type:"index",label:"序号",width:"100"}),e(u,{prop:"id",label:"分组ID",width:"100"}),e(u,{prop:"name",label:"分组名称",width:"250"}),e(u,{prop:"desc",label:"分组描述"}),e(u,{prop:"updated_at",label:"更新时间",width:"250"}),e(u,{prop:"created_at",label:"创建时间",width:"250"}),e(u,{label:"操作",width:"250"},{default:t(({row:s,$index:ie})=>[s.id===1||s.id===2?(_(),b(w,{key:0,class:"box-item",effect:"light",content:"系统预设分组不能修改",placement:"bottom-start"},{default:t(()=>[e(o,{disabled:"",size:"small",type:"primary",onClick:k=>D(s)},{default:t(()=>[p("编辑")]),_:2},1032,["onClick"])]),_:2},1024)):(_(),b(o,{key:1,size:"small",type:"primary",onClick:k=>D(s)},{default:t(()=>[p("编辑")]),_:2},1032,["onClick"])),s.id===1||s.id===2?(_(),b(w,{key:2,class:"box-item",effect:"light",content:"系统预设分组不能删除",placement:"bottom-start"},{default:t(()=>[e(o,{disabled:"",size:"small",type:"danger",onClick:k=>C(s)},{default:t(()=>[p("删除")]),_:2},1032,["onClick"])]),_:2},1024)):(_(),b(o,{key:3,size:"small",type:"danger",onClick:k=>C(s)},{default:t(()=>[p("删除")]),_:2},1032,["onClick"]))]),_:1})]),_:1},8,["data"])),[[H,v.value]])]),_:1}),e(T,{onClosed:M,modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=s=>c.value=s),title:m.value.id?"编辑分组":"新增分组",width:"600px"},{footer:t(()=>[x("span",de,[e(o,{onClick:Y},{default:t(()=>[p("取消")]),_:1}),e(o,{type:"primary",onClick:S},{default:t(()=>[p(" 确认 ")]),_:1})])]),default:t(()=>[e(oe,{FormData:m.value},null,8,["FormData"])]),_:1},8,["modelValue","title"])],64)}}},fe=U(re,[["__scopeId","data-v-c2f8cf8b"]]);export{fe as default};
